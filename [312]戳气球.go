//æœ‰ n ä¸ªæ°”çƒï¼Œç¼–å·ä¸º0 åˆ° n - 1ï¼Œæ¯ä¸ªæ°”çƒä¸Šéƒ½æ ‡æœ‰ä¸€ä¸ªæ•°å­—ï¼Œè¿™äº›æ•°å­—å­˜åœ¨æ•°ç»„ nums ä¸­ã€‚
//
// ç°åœ¨è¦æ±‚ä½ æˆ³ç ´æ‰€æœ‰çš„æ°”çƒã€‚æˆ³ç ´ç¬¬ i ä¸ªæ°”çƒï¼Œä½ å¯ä»¥è·å¾— nums[i - 1] * nums[i] * nums[i + 1] æšç¡¬å¸ã€‚ è¿™é‡Œçš„ i -
// 1 å’Œ i + 1 ä»£è¡¨å’Œ i ç›¸é‚»çš„ä¸¤ä¸ªæ°”çƒçš„åºå·ã€‚å¦‚æœ i - 1æˆ– i + 1 è¶…å‡ºäº†æ•°ç»„çš„è¾¹ç•Œï¼Œé‚£ä¹ˆå°±å½“å®ƒæ˜¯ä¸€ä¸ªæ•°å­—ä¸º 1 çš„æ°”çƒã€‚
//
// æ±‚æ‰€èƒ½è·å¾—ç¡¬å¸çš„æœ€å¤§æ•°é‡ã€‚
//
//
//ç¤ºä¾‹ 1ï¼š
//
//
//è¾“å…¥ï¼šnums = [3,1,5,8]
//è¾“å‡ºï¼š167
//è§£é‡Šï¼š
//nums = [3,1,5,8] --> [3,5,8] --> [3,8] --> [8] --> []
//coins =  3*1*5    +   3*5*8   +  1*3*8  + 1*8*1 = 167
//
// ç¤ºä¾‹ 2ï¼š
//
//
//è¾“å…¥ï¼šnums = [1,5]
//è¾“å‡ºï¼š10
//
//
//
//
// æç¤ºï¼š
//
//
// n == nums.length
// 1 <= n <= 300
// 0 <= nums[i] <= 100
//
//
// Related Topics æ•°ç»„ åŠ¨æ€è§„åˆ’ ğŸ‘ 1159 ğŸ‘ 0
package main

//leetcode submit region begin(Prohibit modification and deletion)
func maxCoins(nums []int) int {
	length := len(nums)
	// ç»„è£…æ–°æ•°ç»„
	newLength := length + 2
	newNums := make([]int, newLength)
	copy(newNums[1:], nums)
	newNums[0], newNums[newLength-1] = 1, 1

	// å®šä¹‰dpï¼ŒäºŒç»´æ•°ç»„ï¼Œä»£è¡¨åŒºé—´iï¼Œjä¹‹é—´ï¼Œæ’å…¥ä¸€ä¸ªæ°”çƒï¼Œå¾—åˆ°çš„æœ€å¤§çš„ç¡¬å¸æ•°é‡
	dp := make([][]int, newLength)

	// åˆå§‹åŒ–ï¼Œè®¡ç®—å‡ºæœ‰ä¸€ä¸ªæ•°åŒºé—´çš„æ•°å­—ï¼Œ[0,2],[1,3],[2,4],[3,5]ï¼Œè®¡ç®—è¿™ä¸ªåŒºé—´ä¹‹å†…ï¼Œæ’å…¥ä¸€ä¸ªæ°”çƒï¼Œå¾—åˆ°çš„ç¡¬å¸æ•°é‡
	for i := 0; i < newLength; i++ {
		dp[i] = make([]int, newLength)
		if i < newLength-2 {
			dp[i][i+2] = newNums[i] * newNums[i+1] * newNums[i+2]
		}
	}

	// åœ¨[i,j]åŒºé—´å†…ï¼Œè¦æƒ³ç¡¬å¸æœ€å¤šï¼Œä»åå¾€å‰æ¨å¯¼ï¼Œä¹Ÿå°±æ˜¯å¯ä»¥æŒ‰ç…§å¾€i,jä¹‹é—´ï¼Œå¾€é‡Œé¢æ’å…¥æ°”çƒï¼Œè®¡ç®—ç¡¬å¸ã€‚
	// è¿™æ ·çš„å¥½å¤„æ˜¯å¯ä»¥å°†å¤§é—®é¢˜åˆ’åˆ†ä¸ºå°é—®é¢˜ï¼Œå°é—®é¢˜ä¹‹é—´ä¸ç›¸äº’å½±å“
	// åœ¨[i,j]ä¹‹é—´ï¼Œæ’å…¥ä¸€ä¸ªæ°”çƒï¼Œç¡¬å¸æœ€å¤šï¼Œåˆ™æ˜¯kä»i+1åˆ°j-1çš„max(dp[i][k]+newNums[i]*newNums[k]*newNums[j]+dp[k][j])
	// è¿™ä¸ªé‡Œé¢çš„å­ç³»ç»Ÿå°±æ˜¯dp[i][k]ï¼Œå­ç³»ç»Ÿçš„è®¡ç®—ï¼Œä¸ä¼šå½±å“dp[i][j]ã€‚ç›¸æ¯”è®¡ç®—æˆ³ç ´æ°”çƒï¼Œä¼šæ¶‰åŠåˆ°å·¦è¾¹ç•Œæˆ–è€…å³è¾¹ç•Œçš„æ”¹åŠ¨ï¼Œå¾€é‡Œé¢æ’å…¥çš„æ€æƒ³æ›´å¥½ã€‚
	// ä»é—´éš”3åˆ°é—´éš”5
	for i := 3; i < newLength; i++ {
		// ä»è§’æ ‡0å¼€å§‹ï¼Œ[0,3]
		for j := 0; j < newLength-i; j++ {
			// dp[j][j+i] =  max(xxx)
			tmpMax := 0
			// å¼€å§‹è®¡ç®—ä¸­é—´çš„maxï¼Œä¹Ÿå°±æ˜¯jåˆ°j+iä¹‹é—´
			for m := j + 1; m < j+i; m++ {
				tmp := dp[j][m] + newNums[j]*newNums[m]*newNums[j+i] + dp[m][j+i]
				if tmp > tmpMax {
					tmpMax = tmp
				}
			}
			dp[j][j+i] = tmpMax
		}
	}

	return dp[0][newLength-1]
}

func max(i int, i2 int) int {
	if i > i2 {
		return i
	}
	return i2
}

//leetcode submit region end(Prohibit modification and deletion)
